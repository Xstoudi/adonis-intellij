<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
  <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
  <id>io.stouder.adonis</id>

  <!-- Public plugin name should be written in Title Case.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
  <name>Adonis</name>

  <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
  <vendor email="xavier+adonis@stouder.io" url="https://stouder.io/">StouderIO</vendor>

  <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
       Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
  <description>Adonis support in Jetbrains IDEs.</description>

  <!-- Product and plugin compatibility requirements.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.lang</depends>
  <depends>org.jetbrains.plugins.textmate</depends>
  <depends>JavaScript</depends>

  <resource-bundle>messages.AdonisBundle</resource-bundle>

  <!-- Extension points defined by the plugin.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
  <extensions defaultExtensionNs="com.intellij">
    <projectService serviceImplementation="io.stouder.adonis.service.TextmateServiceImpl" serviceInterface="io.stouder.adonis.service.TextmateService" />
    <projectService serviceImplementation="io.stouder.adonis.service.AdonisAppServiceImpl" serviceInterface="io.stouder.adonis.service.AdonisAppService" />
    <projectService serviceImplementation="io.stouder.adonis.service.AdonisRouteServiceImpl" serviceInterface="io.stouder.adonis.service.AdonisRouteService" />
    <projectService serviceImplementation="io.stouder.adonis.service.AdonisAceServiceImpl" serviceInterface="io.stouder.adonis.service.AdonisAceService" />

    <postStartupActivity implementation="io.stouder.adonis.activity.InitTextmateActivity" />
    <postStartupActivity implementation="io.stouder.adonis.activity.InitRoutesActivity" />
    <postStartupActivity implementation="io.stouder.adonis.activity.InitCommandsActivity" />
    
    <fileType
      name="Edge"
      implementationClass="io.stouder.adonis.edge.file.EdgeFileType"
      fieldName="INSTANCE"
      language="Edge"
      extensions="edge"
    />

    <lang.parserDefinition
      language="Edge"
      implementationClass="io.stouder.adonis.edge.parsing.EdgeParserDefinition"
    />
    <lang.parserDefinition language="Edge" implementationClass="io.stouder.adonis.edge.parsing.EdgeParserDefinition" />
    <lang.ast.factory language="Edge" implementationClass="io.stouder.adonis.edge.parsing.EdgeAstFactory" />
    <lang.fileViewProviderFactory language="Edge" implementationClass="io.stouder.adonis.edge.file.EdgeFileViewProviderFactory" />
    <lang.braceMatcher language="Edge" implementationClass="io.stouder.adonis.edge.editor.EdgeBraceMatcher" />
    <lang.syntaxHighlighter language="Edge" implementationClass="io.stouder.adonis.edge.highlight.EdgeHighlighter" />
    <editorHighlighterProvider filetype="Edge" implementationClass="io.stouder.adonis.edge.file.EdgeHighlighterProvider" />
    <toolWindow
      factoryClass="io.stouder.adonis.tool_window.AdonisToolWindow"
      id="adonis"
      secondary="true"
      anchor="right"
      icon="io.stouder.adonis.AdonisIcons.ADONIS_TOOL_WINDOW"
    />

    <moduleBuilder
      builderClass="io.stouder.adonis.module.AdonisModuleBuilder"
      id="ADONIS_MODULE_BUILDER"
    />
  </extensions>

  <actions>
    <group
      id="io.stouder.adonis.RoutesToolbar"
      text="Adonis"
      description="Adonis"
      popup="false"
      icon="io.stouder.adonis.AdonisIcons.ADONIS"
    />
    <action
      id="io.stouder.adonis.action.RefreshRoutesAction"
      class="io.stouder.adonis.action.RefreshRoutesAction"
      text="Refresh routes"
      description="Refresh Adonis routes"
      icon="AllIcons.Actions.Refresh"
    >
      <add-to-group group-id="io.stouder.adonis.RoutesToolbar" />
    </action>
  </actions>

  <projectListeners>
    <listener
      class="io.stouder.adonis.tool_window.content.MakeToolWindowContent"
      topic="io.stouder.adonis.notifier.AdonisRcUpdateNotifier"
    />
    <listener
      class="io.stouder.adonis.listener.AdonisBulkFileListener"
      topic="com.intellij.openapi.vfs.newvfs.BulkFileListener"
    />
  </projectListeners>
</idea-plugin>